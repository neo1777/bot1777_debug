# Database Schema: NeoTradingBot1777

## Status: PROPOSED

The system utilizes **Hive**, a lightweight and fast NoSQL database for Dart, to persist critical application data.

### Environment Isolation Mechanism
To ensure absolute isolation between Real and Testnet environments, all repositories implement a **Key-Prefixing Strategy**:
- **Real Mode**: Keys are prefixed with `real_` (e.g., `real_BTCUSDC`).
- **Testnet Mode**: Keys are prefixed with `test_` (e.g., `test_BTCUSDC`).

This prevents any data leakage or cross-contamination at the persistence level.

### Core Hive Boxes
| Box Name | DTO Type | Description |
| :--- | :--- | :--- |
| `app_settings_box` | `AppSettingsHiveDto` | Global configuration (Mode, API Keys, Risk settings). |
| `strategy_state_box`| `AppStrategyStateHiveDto`| Current trading state for each symbol (Round ID, Quantity, etc). |
| `trading_repository_box` | `AppTradeHiveDto` | Full history of executed trades. |
| `fifo_trades_box` | `FifoAppTradeHiveDto` | Open individual trades used for DCA and Profit calculation. |
| `log_settings_box` | `LogSettingsHiveDto` | Logging preferences and verbosity. |

### Data Consistency
- **Atomic Updates**: Repositories use Mutex locks to ensure data integrity during concurrent writes.
- **DTO Pattern**: Clear separation between Domain entities and Persistence DTOs.

---
Generated by Ralph Doc Automation.